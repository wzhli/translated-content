---
title: background
slug: Mozilla/Add-ons/WebExtensions/manifest.json/background
tags:
  - 擴充套件
translation_of: Mozilla/Add-ons/WebExtensions/manifest.json/background
---
<div>
<div>{{AddonSidebar}}</div>

<table class="fullwidth-table standard-table">
 <tbody>
  <tr>
   <th scope="row" style="width: 30%;">型別</th>
   <td><code>Object</code></td>
  </tr>
  <tr>
   <th scope="row">強制</th>
   <td>No</td>
  </tr>
  <tr>
   <th scope="row">範例</th>
   <td>
    <pre class="brush: json no-line-numbers  language-json">
<code class="language-json"><span class="key token">"background":</span> <span class="punctuation token">{</span>
  <span class="key token">"scripts":</span> <span class="punctuation token">[</span><span class="string token">"background.js"</span><span class="punctuation token">]</span>
<span class="punctuation token">}</span></code></pre>
   </td>
  </tr>
 </tbody>
</table>

<p>用 <code>background</code> 鍵來引入一個或多個後端腳本，還有一個選擇性的套件後端頁面。</p>

<p>後端腳本是用來放置一些需要維護長期狀態或是進行長期操作的程式碼，它麼的生命週期跟任何網頁或瀏覽器視窗是獨立的。</p>

<p>後端腳本會在套件一被讀取就被讀入，一直到套件被禁用或移除才會卸載。只要你有請求對應的<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">權限</a>你可以在這個腳本裡使用任何擴充套件 APIs。</p>

<p>更多細節，查看<a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#Background_pages">套件解析</a>的"後端頁面"章節。</p>

<p><code>background</code> 鍵是一個物件，可能包含下列二屬性其中之一，兩者都是選擇性的：</p>

<table class="standard-table">
 <tbody>
  <tr>
   <td><code>"scripts"</code></td>
   <td>
    <p>一個字串組成的陣列，每個都是 JavaScript 原始碼的路徑。路徑是 manifest.json 檔案自身的相對路徑。這些是會被套件讀取的後端腳本。</p>

    <p>腳本共用全局 <code>window</code>。</p>

    <p>腳本根據陣列裡的順序讀入。</p>

    <p><strong>註：Firefox 版本50以前有一個錯誤</strong> 當 Firefox 除錯器開啓時，腳本並不總是按照陣列裡的順序讀入。要解決這個錯誤，你可以用 <code>"page"</code> 屬性並且在頁面中透過 <code>&lt;script&gt;</code> 標籤讀入後端腳本。這個錯誤在 Firefox 50 被修正，從那開始腳本總是會依照陣列中的順序讀入。</p>

    <div class="note">
    <p><strong>註：</strong> 如果你想要用<code>&lt;script&gt;標籤</code>從遠端取得一個腳本（例如 <code>&lt;script src = "https://code.jquery.com/jquery-1.7.1.min.js"&gt;</code>），你必須要修改套件 manifest.json 中的 <code>content_security_policy</code> 鍵。</p>
    </div>
   </td>
  </tr>
  <tr>
   <td><code>"page"</code></td>
   <td>
    <p>如果你指定 <code>"scripts"</code>，那麼爲了讓你的腳本執行一個空白頁面會被建立。</p>

    <p>如果頁面中需要某些內容，你可以用 <code>"page"</code> 選項定義自己的頁面。</p>

    <p>如果你用了這個屬性，你就不能透過 <code>"scripts"</code> 來指定後端腳本。但是你可以像一般的網頁一樣在頁面中引入你自己的腳本。</p>
   </td>
  </tr>
 </tbody>
</table>

<h2 id="範例">範例</h2>

<pre class="brush: json no-line-numbers  language-json"><code class="language-json">  <span class="key token">"background":</span> <span class="punctuation token">{</span>
    <span class="key token">"scripts":</span> <span class="punctuation token">[</span><span class="string token">"jquery.js"</span><span class="punctuation token">,</span> <span class="string token">"my-background.js"</span><span class="punctuation token">]</span>
  <span class="punctuation token">}</span></code></pre>

<p>讀取兩個後端腳本。</p>

<pre class="brush: json line-numbers  language-json"><code class="language-json"><span class="key token">"background":</span> <span class="punctuation token">{</span>
    <span class="key token">"page":</span> <span class="string token">"my-background.html"</span>
  <span class="punctuation token">}</span></code></pre>

<p>讀取一個自訂的後端頁面。</p>

<h2 id="瀏覽器兼容">瀏覽器兼容</h2>
</div>

<p>{{Compat("webextensions.manifest.background", 10)}}</p>
