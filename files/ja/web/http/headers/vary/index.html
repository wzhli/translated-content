---
title: Vary
slug: Web/HTTP/Headers/Vary
tags:
  - HTTP
  - Reference
  - ヘッダー
  - リファレンス
  - レスポンス
  - レスポンスヘッダー
translation_of: Web/HTTP/Headers/Vary
---
<div>{{HTTPSidebar}}</div>

<p><strong><code>Vary</code></strong> HTTP レスポンスヘッダーは、オリジンのサーバーから新しく要求するのではなく、キャッシュされたレスポンスを使用できるかどうかを決定するために将来のリクエストヘッダーをどのように一致させるかを決定します。これは、<a href="/ja/docs/Web/HTTP/Content_negotiation">コンテンツネゴシエーション</a>アルゴリズムでリソースの表現を選択するときにどのヘッダーを使用したかを示すためにサーバーによって使用されます。</p>

<p><code>Vary</code> ヘッダーは {{HTTPStatus("200")}} <code>OK</code> レスポンスに設定されるのと同様に、 {{HTTPStatus("304")}} <code>Not Modified</code> にも設定されます。</p>

<table class="properties">
 <tbody>
  <tr>
   <th scope="row">ヘッダー種別</th>
   <td>{{Glossary("Response header", "レスポンスヘッダー")}}</td>
  </tr>
  <tr>
   <th scope="row">{{Glossary("Forbidden header name", "禁止ヘッダー名")}}</th>
   <td>いいえ</td>
  </tr>
 </tbody>
</table>

<h2 id="Syntax" name="Syntax">構文</h2>

<pre class="syntaxbox">Vary: *
Vary: &lt;header-name&gt;, &lt;header-name&gt;, ...
</pre>

<h2 id="Directives" name="Directives">ディレクティブ</h2>

<dl>
 <dt>*</dt>
 <dd>URL のための各リクエストは、固有でキャッシュ不可能なリクエストとして扱われると仮定されます。これを示すのには {{HTTPHeader("Cache-Control")}}: <code>no-store</code> を使用したほうが良く、こちらはより明確に読むことができ、オブジェクトが保存されないことを示します。</dd>
 <dt>&lt;header-name&gt;</dt>
 <dd>コンマ区切りで、キャッシュされたレスポンスが使用されるかどうかを決定する際に関わるヘッダー名のリストです。</dd>
</dl>

<h2 id="Examples" name="Examples">例</h2>

<h3 id="Dynamic_serving" name="Dynamic_serving">動的な提供</h3>

<p><code>Vary: User-Agent</code> ヘッダーが使用されたとき、キャッシュサーバーはキャッシュからページを提供するかどうかを決定する際にユーザーエージェントを考慮するべきです。例えば、モバイルユーザーに対して異なるコンテンツを提供しているのであれば、誤ってサイトのデスクトップ版のサイトをモバイルユーザーに対して提供してしまうことを防ぐのに役立ちます。これは Google 等の検索エンジンがページのモバイル版を発見するのに役立ち、 <a href="https://en.wikipedia.org/wiki/Cloaking">Cloaking</a> を求めずに区別することができる可能性があります。</p>

<pre>Vary: User-Agent</pre>

<h2 id="Specifications" name="Specifications">仕様書</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">仕様書</th>
   <th scope="col">題名</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>{{RFC("7231", "Vary", "7.1.4")}}</td>
   <td>Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの互換性</h2>

<p>{{Compat("http.headers.Vary")}}</p>

<h2 id="Compatibility_notes" name="Compatibility_notes">互換性メモ</h2>

<ul>
 <li><a href="https://blogs.msdn.microsoft.com/ieinternals/2009/06/17/vary-with-care/">Vary with care – Vary header problems in IE6-9</a></li>
</ul>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li><a href="https://www.smashingmagazine.com/2017/11/understanding-vary-header/">Understanding The Vary Header - Smashing Magazine</a></li>
 <li><a href="https://www.fastly.com/blog/best-practices-for-using-the-vary-header">Best Practices for Using the Vary Header – fastly.com</a></li>
 <li><a href="/ja/docs/Web/HTTP/Content_negotiation">Content negotiation</a></li>
</ul>
