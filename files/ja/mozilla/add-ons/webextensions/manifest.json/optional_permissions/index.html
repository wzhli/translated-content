---
title: optional_permissions
slug: Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions
tags:
  - Add-ons
  - WebExtensions
  - manifest.json
  - optional_permissions
translation_of: Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions
---
<div>{{AddonSidebar}}</div>

<table class="fullwidth-table standard-table">
 <tbody>
  <tr>
   <th scope="row" style="width: 30%;">型</th>
   <td><code>Array</code></td>
  </tr>
  <tr>
   <th scope="row">必須</th>
   <td>いいえ</td>
  </tr>
  <tr>
   <th scope="row">例</th>
   <td>
    <pre class="brush: json no-line-numbers">
"optional_permissions": [
  "*://developer.mozilla.org/*",
  "webRequest"
]</pre>
   </td>
  </tr>
 </tbody>
</table>

<p><code>optional_permissions</code> キーを使って、拡張機能がインストールされた後に、実行時に要求するパーミッションを一覧できます。</p>

<p><code><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></code> キーは拡張機能がインストールされる時に必要とするパーミッションを一覧しますが、<code>optional_permissions</code> は拡張機能のインストール時には必要でないが、インストール後のどこかで要求されることのあるパーミッションを一覧します。パーミッションを要求するには、<code><a href="/ja/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></code> API を使います。パーミッションを要求すると、おそらくユーザーに拡張機能にパーミッションを許可しても良いかを尋ねるダイアログが表示されるでしょう。</p>

<p>このキーは 2種類のパーミッションを含みます: ホストパーミッションと API パーミッションです。</p>

<h2 id="Host_permissions" name="Host_permissions">ホストパーミッション</h2>

<p>これは <code><a href="/ja/Add-ons/WebExtensions/manifest.json/permissions#Host_permissions">permissions</a></code> キーで指定できるホストパーミッションと同じです。</p>

<h2 id="API_permissions" name="API_permissions">API パーミッション</h2>

<p>下記のいずれも入れることができますが、すべてのブラウザーに入ってはいません: ブラウザー固有の詳細については、互換性テーブルを確認してください:</p>

<ul>
 <li><code>activeTab</code></li>
 <li><code>background</code></li>
 <li><code>bookmarks</code></li>
 <li><code>browserSettings</code></li>
 <li><code>clipboardRead</code></li>
 <li><code>clipboardWrite</code></li>
 <li><code>contentSettings</code></li>
 <li><code>contextMenus</code></li>
 <li><code>cookies</code></li>
 <li><code>debugger</code></li>
 <li><code>downloads</code></li>
 <li><code>downloads.open</code></li>
 <li><code>geolocation</code></li>
 <li><code>history</code></li>
 <li><code>idle</code></li>
 <li><code>management</code></li>
 <li><code>notifications</code></li>
 <li><code>pageCapture</code></li>
 <li><code>tabs</code></li>
 <li><code>topSites</code></li>
 <li><code>webNavigation</code></li>
 <li><code>webRequest</code></li>
 <li><code>webRequestBlocking</code></li>
</ul>

<p>これは <code><a href="/ja/Add-ons/WebExtensions/manifest.json/permissions#API_permissions">permissions</a></code> で許可される API パーミッションのサブセットです。</p>

<p>このセットでは、下記のパーミッションが、ユーザープロンプトなしで暗黙的に許可されます<span class="blob-code-inner"><span class="pl-s">:</span></span><span class="blob-code-inner"><span class="pl-s"> activeTab, cookies, idle, webRequest, webRequestBlocking</span></span></p>

<h2 id="Example" name="Example">例</h2>

<pre class="brush: json no-line-numbers"> "optional_permissions": ["*://developer.mozilla.org/*"]</pre>

<p>拡張機能に developer.mozilla.org 以下のページの権限アクセス要求を有効にします。</p>

<pre class="brush: json no-line-numbers">  "optional_permissions": ["tabs"]</pre>

<p>拡張機能に <code>tabs</code> API の権限部分へのアクセス要求を有効にします。</p>

<pre class="brush: json no-line-numbers">  "optional_permissions": ["*://developer.mozilla.org/*", "tabs"]</pre>

<p>拡張機能に上記の両方への要求を有効にします。</p>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザー実装状況</h2>

<p>{{Compat("webextensions.manifest.optional_permissions")}}</p>
