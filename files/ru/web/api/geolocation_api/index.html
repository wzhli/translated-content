---
title: Использование геолокации
slug: Web/API/Geolocation_API
tags:
  - Geolocation API
  - Guide
  - Intermediate
translation_of: Web/API/Geolocation_API
original_slug: Web/API/Geolocation/Using_geolocation
---
<div>{{securecontext_header}}{{DefaultAPISidebar("Geolocation API")}}</div>

<p><strong>Geolocation API</strong> позволяет пользователю предоставлять своё местоположение web-приложению, если пользователь согласится предоставить его. Из соображений конфиденциальности, у пользователя будет запрошено разрешение на предоставление информации о местоположении.</p>

<h2 id="Концепты_и_использование">Концепты и использование</h2>

<p>Вы часто хотите получать информацию о местоположении пользователя в своём веб приложении, например, для отображения участка на карте, либо для того, чтобы показывать информацию, основанную на местоположении посетителя.</p>

<p>API геолокации может быть вызвано через {{domxref("Navigator.geolocation")}}; это заставит браузер пользователя вывести уведомление с запросом для доступа к текущему местоположению. Если его одобрят, то браузер сможет предоставить доступ ко всем возможностям по работе с информацией о местонахождении (например, GPS).</p>

<p>Тогда разработчику станут доступны несколько разных способов получения соответствующей информации:</p>

<ul>
 <li>{{domxref("Geolocation.getCurrentPosition()")}}: возвратит местоположение устройства</li>
 <li>{{domxref("Geolocation.watchPosition()")}}: зарегистрирует функцию-обработчик, которая будет вызываться автоматически каждый раз, когда местоположение изменится, возвращая новые данные.</li>
</ul>

<p>В обоих случая, методы принимают три аргумента:</p>

<ul>
 <li>Обязательную колбэк-функцию при успехе: если удалось получить местоположение пользователя, то функция вызовется с объектом {{domxref("GeolocationPosition")}} как одним параметром, предоставляющим доступ к данным о месторасположении.</li>
 <li>Необязательную колбэк-функцию при ошибке: если не удалось получить позицию, то колбэк-функция вызовется с объектом {{domxref("GeolocationPositionError")}} как одним параметром, содержащим информацию о том, что пошло не так.</li>
 <li>Необязательный объект {{domxref("PositionOptions")}}, который содержит надстройки получения данных о местоположении.</li>
</ul>

<h2 id="Интерфейсы">Интерфейсы</h2>

<dl>
 <dt>{{domxref("Geolocation")}}</dt>
 <dd>Главный класс этого API — содержит методы для получения текущего местоположения пользователя, наблюдает за его изменениями и удаляет функции-наблюдатели.</dd>
 <dt>{{domxref("GeolocationPosition")}}</dt>
 <dd>Предоставляет месторасположение пользователя. Экземпляр <code>GeolocationPosition</code>, полученный при успешном вызове одного из методов {{domxref("Geolocation")}}, внутри колбэк-функции при успехе, содержит метку времени плюс экземпляр объекта {{domxref("GeolocationCoordinates")}}.</dd>
 <dt>{{domxref("GeolocationCoordinates")}}</dt>
 <dd>Предоставлять координаты пользователя; Экземпляр <code>GeolocationCoordinates</code> содержит широту, долготу и прочую важную подобную информацию.</dd>
 <dt>{{domxref("GeolocationPositionError")}}</dt>
 <dd><code>GeolocationPositionError</code> возвращается при неуспешном вызове методов, содержащихся в {{domxref("Geolocation")}}, внутри колбэк-функции при ошибке, содержит код ошибки и сообщение.</dd>
 <dt>{{domxref("Navigator.geolocation")}}</dt>
 <dd>Точка входа в API. Возвращает экземпляр объекта {{domxref("Geolocation")}}, из которого становятся доступны все функции и методы.</dd>
</dl>

<h2 id="Словари">Словари</h2>

<dl>
 <dt>{{domxref("PositionOptions")}}</dt>
 <dd>Предоставляет объект, содержащий опции, которые можно передать как параметр в  {{domxref("Geolocation.getCurrentPosition()")}} и {{domxref("Geolocation.watchPosition()")}}.</dd>
</dl>

<h2 id="Примеры">Примеры</h2>

<p>{{page("/ru/docs/Web/API/Geolocation_API/Using","Examples")}}</p>

<h2 id="Спецификации">Спецификации</h2>

{{Specifications("api.Geolocation")}}

<h2 id="Поддержка_браузерами">Поддержка браузерами</h2>

<p>{{Compat("api.Geolocation")}}</p>

<h3 id="Доступность">Доступность</h3>

<p>Так как местоположение, основанное на WiFi, часто предоставляется Google, API местоположения может быть не доступен в Китае. Вы можете использовать местных провайдеров, таких как <a href="http://lbsyun.baidu.com/index.php?title=jspopular/guide/geolocation">Baidu</a>, <a href="https://lbs.amap.com/api/javascript-api/guide/services/geolocation#geolocation">Autonavi</a> или <a href="http://lbs.qq.com/tool/component-geolocation.html">Tencent</a>. Эти сервисы используют IP-адрес пользователя и/или приложение для предоставления наиболее точной позиции.</p>

<h2 id="Смотрите_также">Смотрите также</h2>

<ul>
 <li><a href="/ru/docs/Web/API/Geolocation_API/Using">Использование API местоположения</a></li>
 <li><a href="https://www.w3.org/TR/geolocation-API/" rel="external">API местоположения на w3.org</a></li>
 <li><a href="https://hacks.mozilla.org/2013/10/who-moved-my-geolocation/">Кто изменил моё местоположение?</a> (Hacks блог)</li>
</ul>
